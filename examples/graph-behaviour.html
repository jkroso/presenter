<!doctype html>
<html>
<head>
<style>
	body {
		padding: 60px;
	}
	.counter {
		padding: 15px;
		border-radius: 5px;
		background: blue;
		margin:50px auto;
		font: 5em Arial, sans-serif;
	}
</style>
</head>
<body>
<script>
	var presenter = require('..')
	var Counter = presenter('<div tabIndex="1" class="counter">1</div>')

	Counter.prototype.init = function(){
		setTimeout(function () {
			this.view.focus()
		}.bind(this), 0)
	}

	Counter.on('keydown', {
		value: function(e){
			var num = e.target.innerHTML.replace(/!/g, '')
			var val = parseFloat(num, 10) || 0
			if (e.which == 38) return val + 1
			if (e.which == 40) return val - 1
			return val
		},
		bang: function(value){
			value = Math.abs(value)
			var str = ''
			while (value--) str += '!'
			return str
		},
		display: function(value, bang, e){
			var abs = Math.abs(value)
			e.target.innerHTML = abs == value
				? value + bang
				: bang + value
		}
	})

	document.body.appendChild(new Counter().view)
</script>
</body>
</html>