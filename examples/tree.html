<!doctype html>
<html>
<head>
<style>
	body {
		padding: 60px;
		font: 14pt "Inconsolata", "sans-serif";
	}
	.entry > div {
		display: inline-block;
	}
	.entry .key {
		padding: 5px 0;
		white-space: pre;
	}
	.value.composite {
		display: block;
		padding-left: 15px;
		margin: 0;
	}
</style>
</head>
<body>
<script>
	var present = require('..')

	var data = {
		complete: true,
		title: 'task',
		kids: [
			{
				complete: false,
				title: 'child-1',
				kids:[
					{
						complete: false,
						title: 'child-1\'s child'
					}
				]
			},
			{
				complete: true,
				title: 'child-2'
			}
		]
	}

	var Composite = present('<div></div>', function(obj){
		for (var key in obj) {
			this.kids.append(new Entry({
				key: key,
				value: obj[key]
			}))
		}
	})

	var template = '<div class=entry><div class=key>{key}: </div></div>'

	var Entry = present(template, function(model){
		this.kids.append(new Value(model.value))
	})

	var Value = present('<div class=value></div>', function(model){
		if (typeof model == 'object'){
			this.classes.add('composite')
			this.view.appendChild(new Composite(model).view)
		} else {
			this.view.innerHTML = model
		}
	})

	document.body.appendChild(new Value(data).view)
</script>
</body>
</html>