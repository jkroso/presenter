<!doctype html>
<html>
<head>
<style>
  body {
    padding: 60px;
  }
  .car {
    width:50px;
    height: 30px;
    top:100px;
    left:100px;
    border-radius: 5px;
    background: blue;
    position: absolute;
    outline: none;
  }
</style>
</head>
<body>
<script src="../dist/presenter.js"></script>
<script>
  var presenter = require('/src')
  var action = require('action')
  var car = new presenter.Base('<div tabIndex="1" class="car"></div>')

  var arrows = {
    37: 'left',
    38: 'up',
    39: 'right',
    40: 'down'
  }

  var dispatch = action(function(e, subject){
    this.dispatch(arrows[e.which], subject)
  })

  dispatch.hooks = {
    keydown: function(e){
      dispatch.send(e, this)
    }
  }

  dispatch.on(function down(subj){
      var el = subj.view
      el.style.top = el.offsetTop + 15 + 'px'
    })
    .on(function up(subj){
      var el = subj.view
      el.style.top = el.offsetTop - 15 + 'px'
    })
    .on(function right(subj){
      var el = subj.view
      el.style.left = el.offsetLeft + 15 + 'px'
    })
    .on(function left(subj){
      var el = subj.view
      el.style.left = el.offsetLeft - 15 + 'px'
    })

  car.action(dispatch)
  document.body.appendChild(car.view)
  car.view.focus()
</script>
</body>
</html>